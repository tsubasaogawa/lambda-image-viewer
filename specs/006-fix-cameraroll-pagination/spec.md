# Feature Specification: カメラロールのページ네ーション修正

**Feature Branch**: `006-fix-cameraroll-pagination`
**Created**: 2025-11-17
**Status**: Draft
**Input**: User description: "camera roll の修正依頼。現状の問題として、ページネーションすると本来は古い写真が出てくることを期待するが、実際は新しい画像も出てきてしまう点がペインに感じている。この問題を解消することはできるだろうか。どのような技術を使って解消していくかは議論しながら深めていきたい。よろしく。"

## Clarifications
### Session 2025-11-17
- Q: タイムスタンプが重複する画像がある場合、安定した順序を保証するために、第二の並び替えキーとして何を使用すべきですか？ → A: タイムスタンプ（降順）、次にユニークID（降順）で並び替える
- Q: 1ページあたりに表示する写真の最大件数は何件に設定すべきですか？ → A: 50件
- Q: ページネーションのUIは、「次へ」ボタンの無効化以外に、現在のページ番号や総ページ数などの情報を提供すべきですか？ → A: 「次へ」ボタンの無効化のみで十分とする

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 正しい時系列での写真表示 (Priority: P1)

ユーザーがカメラロールを閲覧し、ページネーションを利用して過去の写真を遡る際に、写真は常に撮影日が古い順（降順）で表示されるべきです。現在のように新しい写真が混在することはなく、シームレスな閲覧体験を提供します。

**Why this priority**: 現在のバグはユーザー体験を著しく損なっており、写真を探す上で混乱を招くため、最優先で修正が必要です。

**Independent Test**: ページネーションの「次へ」ボタンをクリックするたびに、表示される写真が常に現在表示されている写真よりも古い日付のものだけで構成されていることを確認することでテスト可能です。

**Acceptance Scenarios**:

1. **Given** ユーザーがカメラロールの初回ページを開いている, **When** 「次へ」ボタンをクリックする, **Then** 表示されるすべての写真の撮影日が、初回ページの写真よりも古い。
2. **Given** ユーザーがカメラロールの2ページ目を表示している, **When** 「次へ」ボタンをクリックする, **Then** 表示されるすべての写真の撮影日が、2ページ目の写真よりも古い。

### Edge Cases

- 最後のページに到達した場合、「次へ」ボタンは非表示または無効化される。
- 写真データが存在しない場合、その旨を伝えるメッセージが表示される。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: カメラロールの写真は、撮影日の降順（新しいものが先）、次にユニークIDの降順で初期表示されなければならない。
- **FR-002**: ページネーションで次のページに遷移した場合、表示される写真は常に前のページの写真より撮影日が古いものでなければならない。
- **FR-003**: ページネーションの各ページで表示される写真の順序は、撮影日の降順、次にユニークIDの降順でなければならない。
- **FR-004**: 最後のページまで到達した場合、それ以上過去の写真がないことをユーザーに示唆する（例：「次へ」ボタンの無効化）。
- **FR-005**: 1ページあたりに表示する写真の最大件数は50件とする。
- **FR-006**: ページネーションのUIは、「次へ」ボタンの無効化のみとし、現在のページ番号や総ページ数などの情報は表示しない。

### Key Entities *(include if feature involves data)*

- **Image**: `id`, `timestamp` (撮影日時), `url` などの属性を持つ。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: ページネーションを利用してカメラロールを1ページ目から最終ページまで閲覧した際に、写真の時系列が一度も逆転しない。
- **SC-002**: ユーザーが目的の写真を探すのにかかる時間が、修正前と比較して感覚的に短縮される（定性的な評価）。
- **SC-003**: ページネーションの動作に関するユーザーからの問い合わせが0件になる。